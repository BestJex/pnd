(function(e){function t(t){for(var i,l,s=t[0],r=t[1],c=t[2],d=0,f=[];d<s.length;d++)l=s[d],o[l]&&f.push(o[l][0]),o[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var r=n[s];0!==o[r]&&(i=!1)}i&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var i={},o={app:0},a=[];function l(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=i,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(n,i,function(t){return e[t]}.bind(null,i));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=r;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("6068"),o=n.n(i);o.a},"05cf":function(e,t,n){},"1ba3":function(e,t,n){"use strict";var i=n("1e4e"),o=n.n(i);o.a},"1e4e":function(e,t,n){},"1efc":function(e,t,n){},"2c36":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAGklEQVQ4y2NgGAVEg/9EAMo0jHp61NOjAAgAUWrXKeQhPE4AAAAASUVORK5CYII="},"2fa5":function(e,t,n){},"48aa":function(e,t,n){"use strict";var i=n("8bbe"),o=n.n(i);o.a},"4a70":function(e,t,n){"use strict";var i=n("a98c"),o=n.n(i);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("5c07"),n("53da"),n("2556"),n("d0f8");var i=n("6e6d"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view"),n("FileUpload")],1)},a=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"file-upload-layout",class:["open"===e.status?"open":"close"],on:{click:function(t){return e.operationWindow("collapse")}}},[n("div",{staticClass:"dialog-header"},[n("span",{staticClass:"dialog-header-title"},[e._v("文件上传")]),n("div",{staticClass:"dialog-control"},[n("span",{on:{click:function(t){return e.operationWindow("collapse")}}},[e._v("-")]),n("span",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.operationWindow("close")}}},[e._v("x")])])]),n("div",{staticClass:"dialog-body"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"360"}},[n("el-table-column",{attrs:{prop:"fileName",label:"文件名",width:"180"}}),n("el-table-column",{attrs:{prop:"size",label:"大小",width:"180"}}),n("el-table-column",{attrs:{prop:"dir",label:"上传目录"}}),n("el-table-column",{attrs:{prop:"status",label:"状态"}})],1)],1)]),n("div",{staticClass:"file-upload-layout collapse-header",class:["collapse"===e.status?"collapse":"close"],on:{click:function(t){return e.operationWindow("open")}}},[n("div",{staticClass:"dialog-header"},[n("span",{staticClass:"dialog-header-title"},[e._v("文件上传")]),n("div",{staticClass:"dialog-control"},[n("span",{on:{click:function(t){return e.operationWindow("open")}}},[e._v("□")]),n("span",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.operationWindow("close")}}},[e._v("x")])])])])])},s=[],r=n("8e61"),c=n("52c1"),u={data:function(){return{tableData:[{fileName:"肖生克的救赎",size:"1.5G",dir:"全部文件",status:"success"},{fileName:"coco",size:"1.7G",dir:"全部文件",status:"success"}]}},computed:Object(r["a"])({},Object(c["b"])({status:function(e){return e.fileUploadComponentStatus}})),methods:{operationWindow:function(e){this.$store.commit("operationFileUploadWindow",e)}}},d=u,f=(n("5789"),n("17cc")),p=Object(f["a"])(d,l,s,!1,null,"986b3ae6",null),m=p.exports,v={components:{FileUpload:m}},h=v,g=(n("034f"),Object(f["a"])(h,o,a,!1,null,null,null)),b=g.exports,w=n("081a"),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("Header"),n("el-container",{staticClass:"main-body"},[n("Aside"),n("router-view")],1)],1)},y=[],L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-header",[i("el-menu",{attrs:{mode:"horizontal","background-color":"#4284f4","text-color":"#fff"}},[i("div",{staticClass:"menu"},[i("img",{attrs:{src:n("2c36"),alt:"切换主菜单"},on:{click:e.toggleAsideStatus}}),i("span",[e._v("全部文件")])]),i("el-dropdown",{staticClass:"avatar-container",attrs:{trigger:"click"}},[i("div",{staticClass:"avatar-wrapper"},[i("img",{staticClass:"user-avatar",attrs:{src:n("ca70")}})]),i("el-dropdown-menu",{staticClass:"user-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[i("router-link",{staticClass:"inlineBlock",attrs:{to:"/"}},[i("el-dropdown-item",[e._v("\n            首页\n          ")])],1)],1)],1)],1)],1)},k=[],x={data:function(){return{activeIndex:"1"}},methods:{handleSelect:function(e,t){console.log(e,t,"4284f4")},toggleAsideStatus:function(){this.$store.commit("toggleAside")}}},C=x,$=(n("fa37"),Object(f["a"])(C,L,k,!1,null,"34d075a4",null)),T=$.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"aside",style:{display:e.asideStatus}},[n("el-menu",{staticClass:"el-menu-vertical",attrs:{"default-active":"1","background-color":"#fff","text-color":"#b5b4b4","active-text-color":"#000"}},[n("el-menu-item",{attrs:{index:"1"},on:{click:function(t){return e.linkTo("/file")}}},[n("i",{staticClass:"el-icon-document"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("全部文件")])]),n("el-menu-item",{attrs:{index:"2"},on:{click:function(t){return e.linkTo("/white")}}},[n("i",{staticClass:"el-icon-delete"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("回收站")])])],1)],1)},O=[],S={computed:{asideStatus:function(){return this.$store.state.asideStatus}},methods:{linkTo:function(e){this.$router.push({path:e})}}},j=S,F=(n("1ba3"),Object(f["a"])(j,A,O,!1,null,"afe8c2be",null)),E=F.exports,D={name:"home",components:{Header:T,Aside:E}},M=D,I=(n("cccb"),Object(f["a"])(M,_,y,!1,null,null,null)),B=I.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",[n("div",{staticClass:"main-button"},[n("el-button",{attrs:{type:"primary"}},[n("i",{staticClass:"el-icon-upload"}),n("span",[e._v("上传文件")])]),n("el-button",{attrs:{plain:""},on:{click:e.createFolder}},[n("i",{staticClass:"el-icon-document"}),n("span",[e._v("新建文件夹")])])],1),n("div",{staticClass:"content"},[n("Breadcrumb"),n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","default-sort":{prop:"fileName",order:"descending"}}},[n("el-table-column",{attrs:{label:"文件名",prop:"name",sortable:"","min-width":"54"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("FileIcon",{attrs:{type:t.row.type}}),"folder"===t.row.type?n("a",{staticClass:"file-name",on:{click:function(n){return e.getFileList(t.row.id,t.row.name)}}},[e._v("\n                        "+e._s(t.row.name)+"\n                    ")]):n("a",{staticClass:"file-name"},[e._v("\n                        "+e._s(t.row.name)+"\n                    ")])]}}])}),n("el-table-column",{attrs:{prop:"size",label:"大小",formatter:e.formatterSize,"min-width":"22"}}),n("el-table-column",{attrs:{prop:"gmtModified",label:"修改日期",sortable:"","min-width":"22",formatter:e.formatterTime,"show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"操作","min-width":"22"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("FileOperation",{attrs:{scope:t},on:{flush:e.flushAccordingToLevelList}})]}}])})],1)],1),e.$store.state.fileTreeDialogVisible?n("FileTree",{on:{flush:e.flushAccordingToLevelList}}):e._e()],1)},N=[],P=(n("3a23"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-icon",class:[e.type]})}),U=[],R={props:{type:{validator:function(e){return-1!==["default","folder","pdf","compress_file","video","picture"].indexOf(e)}}}},z=R,W=(n("4a70"),Object(f["a"])(z,P,U,!1,null,"38d0b8d2",null)),G=W.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navigation"},[e.levelList.length>1?n("div",{staticClass:"navigation-prefix"},[n("span",{staticClass:"go-back",on:{click:e.goBack}},[e._v("返回上一级")]),n("span",{staticClass:"navigation-separator"},[e._v("|")])]):e._e(),n("div",{staticClass:"breadcrumb"},e._l(e.levelList,function(t,i){return n("div",{key:i,staticClass:"breadcrumb-item"},[e.levelList.length-1!==i?n("span",{staticClass:"breadcrumb-item-val",on:{click:function(t){return e.forwardTo(i)}}},[e._v(e._s(t.name))]):n("span",{staticClass:"breadcrumb-item-val"},[e._v(e._s(t.name))]),e.levelList.length-1!==i?n("span",{staticClass:"breadcrumb-sparator"},[e._v("/")]):e._e()])}),0)])},H=[],Q={computed:{levelList:function(){return this.$store.state.levelList}},methods:{forwardTo:function(e){this.$store.commit("spliceLevelList",e)},goBack:function(){this.$store.commit("spliceLevelList",this.levelList.length-2)}}},Y=Q,J=(n("5f49"),Object(f["a"])(Y,K,H,!1,null,"30ecfdd4",null)),q=J.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dropdown",[n("span",{staticClass:"el-dropdown-link"},[n("i",{staticClass:"el-icon-more operation"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return e.move(t)}}},[e._v("移动到")]),n("el-dropdown-item",{nativeOn:{click:function(t){return e.copy(t)}}},[e._v("复制到")]),n("el-dropdown-item",{nativeOn:{click:function(t){return e.rename(t)}}},[e._v("重命名")]),"folder"!==e.scope.row.type?n("el-dropdown-item",{nativeOn:{click:function(t){return e.copy(t)}}},[e._v("下载")]):e._e(),n("el-dropdown-item",{nativeOn:{click:function(t){return e.deleteResource(t)}}},[e._v("删除")])],1)],1)},Z=[],ee=n("a59e"),te=n.n(ee),ne=n("7f43"),ie=n.n(ne),oe=n("7105"),ae=n.n(oe),le=ie.a.create({baseURL:"/",timeout:1e4});le.interceptors.response.use(function(e){return e.data},function(e){var t=e;return e.response&&e.response.data&&e.response.data.msg&&(t=e.response.data.msg),Object(oe["Message"])({message:t,type:"error",duration:3e3}),te.a.reject(e)});var se=le;function re(e){return se({url:"/v1/file",method:"get",params:{parentId:e}})}function ce(e,t){return se({url:"/v1/file",method:"post",params:{parentId:e,folderName:t}})}function ue(e,t){return se({url:"/v1/file/"+e,method:"put",params:{fileName:t}})}function de(e){return se({url:"/v1/file/"+e,method:"delete"})}function fe(e){return se({url:"/v1/file/"+e+"/subfolder",method:"get"})}function pe(e,t){return se({url:"/v1/file/"+e+"/move/"+t,method:"put"})}var me={props:["scope"],methods:{move:function(){this.$store.commit("openFileTreeDialog",{title:"移动到",id:this.scope.row.id})},copy:function(){this.$message({message:"该功能还为开发",type:"warning",duration:3e3})},rename:function(){var e=this;this.$prompt("请输入新的文件名","重新命名",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.scope.row.name}).then(function(t){var n=t.value;ue(e.scope.row.id,n).then(function(){e.$emit("flush")})}).catch(function(){})},deleteResource:function(){var e=this;this.$confirm("是否确定要删除该文件？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){de(e.scope.row.id).then(function(t){500===t.code?e.$message({message:t.msg,type:"error",duration:3e3}):e.$emit("flush")})}).catch(function(){})}}},ve=me,he=(n("a7d6"),Object(f["a"])(ve,X,Z,!1,null,"4a328932",null)),ge=he.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.$store.state.fileTreeInfo.title,visible:e.$store.state.fileTreeDialogVisible},on:{"update:visible":function(t){return e.$set(e.$store.state,"fileTreeDialogVisible",t)}}},[n("el-tree",{ref:"fileTree",attrs:{props:e.defaultProps,load:e.loadNode,"node-key":"id","empty-text":"没有文件夹",lazy:"","check-strictly":"","highlight-current":"","show-checkbox":""}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.$store.commit("closeFileTreeDialog")}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.moveNode}},[e._v("确 定")])],1)],1)},we=[],_e={data:function(){return{defaultProps:{label:"name"}}},methods:{loadNode:function(e,t){0===e.level?t([{id:0,name:"全部文件"}]):fe(e.data.id).then(function(e){t(e.data)})},moveNode:function(){var e=this,t=this.$refs.fileTree.getCheckedKeys();1!==t.length?this.$message({message:"请选择一个将要移动的目标文件夹",type:"warning",duration:3e3}):pe(this.$store.state.fileTreeInfo.id,t[0]).then(function(){e.$emit("flush"),e.$store.commit("closeFileTreeDialog")})}}},ye=_e,Le=Object(f["a"])(ye,be,we,!1,null,null,null),ke=Le.exports;n("5f33"),n("f91a");function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss",n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)if(new RegExp("("+i+")").test(t)){for(var o="",a=1;a<=RegExp.$1.length;a++)o+="0";var l="";if(1==RegExp.$1.length)l=n[i];else{o+=n[i];var s=(""+n[i]).length;o=o.substr(s),l=o}t=t.replace(RegExp.$1,l)}return t}var Ce={components:{FileIcon:G,Breadcrumb:q,FileOperation:ge,FileTree:ke},data:function(){return{tableData:[],fileTreeDialogVisible:!1,dialogVisible:"设置"}},computed:{levelList:function(){return this.$store.state.levelList}},watch:{levelList:function(){this.flushAccordingToLevelList()}},methods:{createFolder:function(){var e=this,t=this.levelList[this.levelList.length-1].parentId;this.$prompt("请输入文件夹名","新建文件夹",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(n){var i=n.value;ce(t,i).then(function(){e.flushAccordingToLevelList()})}).catch(function(){})},getFileList:function(e,t){var n=this;re(e).then(function(i){n.tableData=i.data;var o=n.levelList.length;0!==o&&n.levelList[o-1].parentId===e||n.$store.commit("pushLevelList",{parentId:e,name:t})})},flushAccordingToLevelList:function(){var e=this.levelList[this.levelList.length-1];this.getFileList(e.parentId,e.name)},formatterTime:function(e){return xe(new Date(e.gmtModified))},formatterSize:function(e){var t=e.size;return 0===t?"-":t<1024?t+"K":t<1048576?(t/1024).toFixed(1)+"M":t<1073741824?(t/1048576).toFixed(1)+"G":(t/1073741824).toFixed(1)+"P"}},created:function(){0===this.levelList.length?this.getFileList(0,"全部文件"):this.flushAccordingToLevelList()}},$e=Ce,Te=(n("48aa"),Object(f["a"])($e,V,N,!1,null,"22279662",null)),Ae=Te.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},Se=[],je={},Fe=Object(f["a"])(je,Oe,Se,!1,null,null,null),Ee=Fe.exports;i["default"].use(w["a"]);var De=new w["a"]({base:"/",routes:[{path:"/",redirect:"/file",name:"首页"},{path:"/",name:"home",component:B,children:[{path:"file",component:Ae},{path:"white",component:Ee}]}]});i["default"].use(c["a"]);var Me=new c["a"].Store({state:{asideStatus:"inline-block",fileUploadComponentStatus:"close",levelList:[],fileTreeDialogVisible:!1,fileTreeInfo:{title:"设置"}},mutations:{toggleAside:function(e){e.asideStatus="inline-block"===e.asideStatus?"none":"inline-block"},operationFileUploadWindow:function(e,t){e.fileUploadComponentStatus=t},pushLevelList:function(e,t){e.levelList.push(t)},spliceLevelList:function(e,t){e.levelList.splice(t+1,e.levelList.length-t)},openFileTreeDialog:function(e,t){e.fileTreeDialogVisible=!0,e.fileTreeInfo=t},closeFileTreeDialog:function(e){e.fileTreeDialogVisible=!1}},actions:{}});n("26fa");i["default"].config.productionTip=!1,i["default"].use(ae.a),new i["default"]({router:De,store:Me,render:function(e){return e(b)}}).$mount("#app")},5789:function(e,t,n){"use strict";var i=n("1efc"),o=n.n(i);o.a},"5f49":function(e,t,n){"use strict";var i=n("2fa5"),o=n.n(i);o.a},6068:function(e,t,n){},6524:function(e,t,n){},"8bbe":function(e,t,n){},"9e9a":function(e,t,n){},a7d6:function(e,t,n){"use strict";var i=n("9e9a"),o=n.n(i);o.a},a98c:function(e,t,n){},ca70:function(e,t,n){e.exports=n.p+"img/user.e63b92fb.jpeg"},cccb:function(e,t,n){"use strict";var i=n("05cf"),o=n.n(i);o.a},fa37:function(e,t,n){"use strict";var i=n("6524"),o=n.n(i);o.a}});
//# sourceMappingURL=app.a626d937.js.map