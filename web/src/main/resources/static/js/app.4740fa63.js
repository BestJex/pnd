(function(e){function t(t){for(var i,l,s=t[0],r=t[1],c=t[2],f=0,d=[];f<s.length;f++)l=s[f],o[l]&&d.push(o[l][0]),o[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var r=n[s];0!==o[r]&&(i=!1)}i&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var i={},o={app:0},a=[];function l(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=i,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(n,i,function(t){return e[t]}.bind(null,i));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=r;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"01ff":function(e,t,n){"use strict";var i=n("94af"),o=n.n(i);o.a},"034f":function(e,t,n){"use strict";var i=n("6068"),o=n.n(i);o.a},"05cf":function(e,t,n){},"1ba3":function(e,t,n){"use strict";var i=n("1e4e"),o=n.n(i);o.a},"1c6b":function(e,t,n){"use strict";var i=n("f5d0"),o=n.n(i);o.a},"1e4e":function(e,t,n){},"2b94":function(e,t,n){"use strict";var i=n("4cfa"),o=n.n(i);o.a},"2c36":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAGklEQVQ4y2NgGAVEg/9EAMo0jHp61NOjAAgAUWrXKeQhPE4AAAAASUVORK5CYII="},"2fa5":function(e,t,n){},"4a70":function(e,t,n){"use strict";var i=n("a98c"),o=n.n(i);o.a},"4cfa":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("5c07"),n("53da"),n("2556"),n("d0f8");var i=n("6e6d"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view"),n("FileUpload")],1)},a=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"file-upload-layout",class:["open"===e.status?"open":"close"],on:{click:function(t){return e.operationWindow("collapse")}}},[n("div",{staticClass:"dialog-header"},[n("span",{staticClass:"dialog-header-title"},[e._v("文件上传")]),n("div",{staticClass:"dialog-control"},[n("span",{on:{click:function(t){return e.operationWindow("collapse")}}},[e._v("-")]),n("span",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.operationWindow("close")}}},[e._v("x")])])]),n("div",{staticClass:"dialog-body"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"360"}},[n("el-table-column",{attrs:{prop:"fileName",label:"文件名",width:"180"}}),n("el-table-column",{attrs:{prop:"size",label:"大小",width:"180"}}),n("el-table-column",{attrs:{prop:"dir",label:"上传目录"}}),n("el-table-column",{attrs:{prop:"status",label:"状态"}})],1)],1)]),n("div",{staticClass:"file-upload-layout collapse-header",class:["collapse"===e.status?"collapse":"close"],on:{click:function(t){return e.operationWindow("open")}}},[n("div",{staticClass:"dialog-header"},[n("span",{staticClass:"dialog-header-title"},[e._v("文件上传")]),n("div",{staticClass:"dialog-control"},[n("span",{on:{click:function(t){return e.operationWindow("open")}}},[e._v("□")]),n("span",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.operationWindow("close")}}},[e._v("x")])])])])])},s=[],r=n("8e61"),c=n("52c1"),u={data:function(){return{tableData:[{fileName:"肖生克的救赎",size:"1.5G",dir:"全部文件",status:"success"},{fileName:"coco",size:"1.7G",dir:"全部文件",status:"success"}]}},computed:Object(r["a"])({},Object(c["b"])({status:function(e){return e.fileUploadComponentStatus},fileUploadList:function(e){return e.fileUploadList}})),watch:{fileUploadList:function(){tableData.push({})}},methods:{operationWindow:function(e){this.$store.commit("operationFileUploadWindow",e)}}},f=u,d=(n("2b94"),n("17cc")),p=Object(d["a"])(f,l,s,!1,null,"6be923bb",null),m=p.exports,v={components:{FileUpload:m}},h=v,g=(n("034f"),Object(d["a"])(h,o,a,!1,null,null,null)),b=g.exports,w=n("081a"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("Header"),n("el-container",{staticClass:"main-body"},[n("Aside"),n("router-view")],1)],1)},_=[],L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-header",[i("el-menu",{attrs:{mode:"horizontal","background-color":"#4284f4","text-color":"#fff"}},[i("div",{staticClass:"menu"},[i("img",{attrs:{src:n("2c36"),alt:"切换主菜单"},on:{click:e.toggleAsideStatus}}),i("span",[e._v("全部文件")])]),i("el-dropdown",{staticClass:"avatar-container",attrs:{trigger:"click"}},[i("div",{staticClass:"avatar-wrapper"},[i("img",{staticClass:"user-avatar",attrs:{src:n("ca70")}})]),i("el-dropdown-menu",{staticClass:"user-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[i("router-link",{staticClass:"inlineBlock",attrs:{to:"/"}},[i("el-dropdown-item",[e._v("\n            首页\n          ")])],1)],1)],1)],1)],1)},$=[],T={data:function(){return{activeIndex:"1"}},methods:{handleSelect:function(e,t){console.log(e,t,"4284f4")},toggleAsideStatus:function(){this.$store.commit("toggleAside")}}},k=T,C=(n("fa37"),Object(d["a"])(k,L,$,!1,null,"34d075a4",null)),x=C.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"aside",style:{display:e.asideStatus}},[n("el-menu",{staticClass:"el-menu-vertical",attrs:{"default-active":"1","background-color":"#fff","text-color":"#b5b4b4","active-text-color":"#000"}},[n("el-menu-item",{attrs:{index:"1"},on:{click:function(t){return e.linkTo("/file")}}},[n("i",{staticClass:"el-icon-document"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("全部文件")])]),n("el-menu-item",{attrs:{index:"2"},on:{click:function(t){return e.linkTo("/white")}}},[n("i",{staticClass:"el-icon-delete"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("回收站")])])],1)],1)},F=[],O={computed:{asideStatus:function(){return this.$store.state.asideStatus}},methods:{linkTo:function(e){this.$router.push({path:e})}}},S=O,I=(n("1ba3"),Object(d["a"])(S,A,F,!1,null,"afe8c2be",null)),j=I.exports,U={name:"home",components:{Header:x,Aside:j}},D=U,E=(n("cccb"),Object(d["a"])(D,y,_,!1,null,null,null)),M=E.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",[n("div",{staticClass:"main-button"},[n("div",{staticClass:"upload",on:{click:e.triggerFileUpload}},[n("el-button",{attrs:{type:"primary"}},[n("i",{staticClass:"el-icon-upload"}),n("span",[e._v("上传文件")])]),n("input",{ref:"fileInput",staticClass:"upload-input",attrs:{type:"file",name:"file",multiple:""},on:{change:e.dealWithFileUpload}})],1),n("el-button",{attrs:{plain:""},on:{click:e.createFolder}},[n("i",{staticClass:"el-icon-document"}),n("span",[e._v("新建文件夹")])])],1),n("div",{staticClass:"content"},[n("Breadcrumb"),n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","default-sort":{prop:"fileName",order:"descending"}}},[n("el-table-column",{attrs:{label:"文件名",prop:"name",sortable:"","min-width":"54"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("FileIcon",{attrs:{type:t.row.type}}),"folder"===t.row.type?n("a",{staticClass:"file-name",on:{click:function(n){return e.getFileList(t.row.id,t.row.name)}}},[e._v("\n                        "+e._s(t.row.name)+"\n                    ")]):n("a",{staticClass:"file-name"},[e._v("\n                        "+e._s(t.row.name)+"\n                    ")])]}}])}),n("el-table-column",{attrs:{prop:"size",label:"大小",formatter:e.formatterSize,"min-width":"22"}}),n("el-table-column",{attrs:{prop:"gmtModified",label:"修改日期",sortable:"","min-width":"22",formatter:e.formatterTime,"show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"操作","min-width":"22"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("FileOperation",{attrs:{scope:t},on:{flush:e.flushAccordingToLevelList}})]}}])})],1)],1),e.$store.state.fileTreeDialogVisible?n("FileTree",{on:{flush:e.flushAccordingToLevelList}}):e._e()],1)},B=[],V=(n("3a23"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-icon",class:[e.type]})}),z=[],W={props:{type:{validator:function(e){return-1!==["default","folder","pdf","compress_file","video","picture"].indexOf(e)}}}},P=W,R=(n("4a70"),Object(d["a"])(P,V,z,!1,null,"38d0b8d2",null)),K=R.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navigation"},[e.levelList.length>1?n("div",{staticClass:"navigation-prefix"},[n("span",{staticClass:"go-back",on:{click:e.goBack}},[e._v("返回上一级")]),n("span",{staticClass:"navigation-separator"},[e._v("|")])]):e._e(),n("div",{staticClass:"breadcrumb"},e._l(e.levelList,function(t,i){return n("div",{key:i,staticClass:"breadcrumb-item"},[e.levelList.length-1!==i?n("span",{staticClass:"breadcrumb-item-val",on:{click:function(t){return e.forwardTo(i)}}},[e._v(e._s(t.name))]):n("span",{staticClass:"breadcrumb-item-val"},[e._v(e._s(t.name))]),e.levelList.length-1!==i?n("span",{staticClass:"breadcrumb-sparator"},[e._v("/")]):e._e()])}),0)])},H=[],Q={computed:{levelList:function(){return this.$store.state.levelList}},methods:{forwardTo:function(e){this.$store.commit("spliceLevelList",e)},goBack:function(){this.$store.commit("spliceLevelList",this.levelList.length-2)}}},Y=Q,J=(n("5f49"),Object(d["a"])(Y,G,H,!1,null,"30ecfdd4",null)),q=J.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dropdown",[n("span",{staticClass:"el-dropdown-link"},[n("i",{staticClass:"el-icon-more operation"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return e.move(t)}}},[e._v("移动到")]),"folder"!==e.scope.row.type?n("el-dropdown-item",{nativeOn:{click:function(t){return e.copy(t)}}},[e._v("复制到")]):e._e(),n("el-dropdown-item",{nativeOn:{click:function(t){return e.rename(t)}}},[e._v("重命名")]),"folder"!==e.scope.row.type?n("el-dropdown-item",{nativeOn:{click:function(t){return e.download(t)}}},[e._v("下载")]):e._e(),n("el-dropdown-item",{nativeOn:{click:function(t){return e.deleteResource(t)}}},[e._v("删除")])],1)],1)},Z=[],ee=n("a59e"),te=n.n(ee),ne=n("7f43"),ie=n.n(ne),oe=n("7105"),ae=n.n(oe),le=ie.a.create({baseURL:"http://localhost:8989/",timeout:1e4});le.interceptors.response.use(function(e){return e.data},function(e){var t=e;return e.response&&e.response.data&&e.response.data.msg&&(t=e.response.data.msg),Object(oe["Message"])({message:t,type:"error",duration:3e3}),te.a.reject(e)});var se=le;function re(e){return se({url:"/v1/file",method:"get",params:{parentId:e}})}function ce(e,t){return se({url:"/v1/file",method:"post",params:{parentId:e,folderName:t}})}function ue(e,t){return se({url:"/v1/file/"+e,method:"put",params:{fileName:t}})}function fe(e){return se({url:"/v1/file/"+e,method:"delete"})}function de(e){return se({url:"/v1/file/"+e+"/subfolder",method:"get"})}function pe(e,t){return se({url:"/v1/file/"+e+"/move/"+t,method:"put"})}function me(e,t){return se({url:"/v1/file/"+e+"/copy",method:"post",data:t})}var ve={props:["scope"],methods:{move:function(){this.$store.commit("openFileTreeDialog",{title:"["+this.scope.row.name+"] 移动到",id:this.scope.row.id,type:"move"})},copy:function(){this.$store.commit("openFileTreeDialog",{title:"["+this.scope.row.name+"] 复制到",id:this.scope.row.id,type:"copy"})},download:function(){this.$message({message:"该功能还为开发",type:"warning",duration:3e3})},rename:function(){var e=this;this.$prompt("请输入新的文件名","重新命名",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.scope.row.name}).then(function(t){var n=t.value;ue(e.scope.row.id,n).then(function(){e.$emit("flush")})}).catch(function(){})},deleteResource:function(){var e=this;this.$confirm("是否确定要删除该文件？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){fe(e.scope.row.id).then(function(){e.$emit("flush")})}).catch(function(){})}}},he=ve,ge=(n("01ff"),Object(d["a"])(he,X,Z,!1,null,"4551d318",null)),be=ge.exports,we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.$store.state.fileTreeInfo.title,visible:e.$store.state.fileTreeDialogVisible},on:{"update:visible":function(t){return e.$set(e.$store.state,"fileTreeDialogVisible",t)}}},[n("el-tree",{ref:"fileTree",attrs:{props:e.defaultProps,load:e.loadNode,"node-key":"id","empty-text":"没有文件夹",lazy:"","check-strictly":"","highlight-current":"","show-checkbox":""}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.$store.commit("closeFileTreeDialog")}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.operateNode}},[e._v("确 定")])],1)],1)},ye=[],_e={data:function(){return{defaultProps:{label:"name"}}},methods:{loadNode:function(e,t){var n=this;0===e.level?t([{id:0,name:"全部文件"}]):de(e.data.id).then(function(e){"move"===n.$store.state.fileTreeInfo.type?t(e.data.filter(function(e){return e.id!==n.$store.state.fileTreeInfo.id})):t(e.data)})},operateNode:function(){"move"===this.$store.state.fileTreeInfo.type?this.moveNode():"copy"===this.$store.state.fileTreeInfo.type&&this.copyNode()},moveNode:function(){var e=this,t=this.$refs.fileTree.getCheckedKeys();1!==t.length?this.$message({message:"请选择一个将要移动的目标文件夹",type:"warning",duration:3e3}):pe(this.$store.state.fileTreeInfo.id,t[0]).then(function(){e.$emit("flush"),e.$store.commit("closeFileTreeDialog")})},copyNode:function(){var e=this,t=this.$refs.fileTree.getCheckedKeys();0===t.length?this.$message({message:"请选择将要复制到的目标文件夹",type:"warning",duration:3e3}):me(this.$store.state.fileTreeInfo.id,t).then(function(){e.$message({message:"复制成功",type:"success",duration:3e3}),e.$store.commit("closeFileTreeDialog")})}}},Le=_e,$e=Object(d["a"])(Le,we,ye,!1,null,null,null),Te=$e.exports,ke=n("056e"),Ce=n.n(ke);n("5f33"),n("f91a");function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss",n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)if(new RegExp("("+i+")").test(t)){for(var o="",a=1;a<=RegExp.$1.length;a++)o+="0";var l="";if(1==RegExp.$1.length)l=n[i];else{o+=n[i];var s=(""+n[i]).length;o=o.substr(s),l=o}t=t.replace(RegExp.$1,l)}return t}function Ae(e){return e=Ce()(e),0===e?"-":e<1024?e+"K":e<1048576?(e/1024).toFixed(1)+"M":e<1073741824?(e/1048576).toFixed(1)+"G":(e/1073741824).toFixed(1)+"P"}var Fe={components:{FileIcon:K,Breadcrumb:q,FileOperation:be,FileTree:Te},data:function(){return{tableData:[],fileTreeDialogVisible:!1,dialogVisible:"设置"}},computed:{levelList:function(){return this.$store.state.levelList}},watch:{levelList:function(){this.flushAccordingToLevelList()}},methods:{createFolder:function(){var e=this,t=this.levelList[this.levelList.length-1].parentId;this.$prompt("请输入文件夹名","新建文件夹",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(n){var i=n.value;ce(t,i).then(function(){e.flushAccordingToLevelList()})}).catch(function(){})},getFileList:function(e,t){var n=this;re(e).then(function(i){n.tableData=i.data;var o=n.levelList.length;0!==o&&n.levelList[o-1].parentId===e||n.$store.commit("pushLevelList",{parentId:e,name:t})})},flushAccordingToLevelList:function(){var e=this.levelList[this.levelList.length-1];this.getFileList(e.parentId,e.name)},formatterTime:function(e){return xe(new Date(e.gmtModified))},formatterSize:function(e){return Ae(e.size)},triggerFileUpload:function(){this.$refs.fileInput.click()},dealWithFileUpload:function(e){var t=e.target.files;console.info(t);var n=this.levelList[this.levelList.length-1].parentId;for(file in t){var i={targetId:n,file:file};this.$store.commit("addUploadFile",i)}this.$store.commit("operationFileUploadWindow","open")}},created:function(){0===this.levelList.length?this.getFileList(0,"全部文件"):this.flushAccordingToLevelList()}},Oe=Fe,Se=(n("1c6b"),Object(d["a"])(Oe,N,B,!1,null,"29f20702",null)),Ie=Se.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},Ue=[],De={},Ee=Object(d["a"])(De,je,Ue,!1,null,null,null),Me=Ee.exports;i["default"].use(w["a"]);var Ne=new w["a"]({base:"/",routes:[{path:"/",redirect:"/file",name:"首页"},{path:"/",name:"home",component:M,children:[{path:"file",component:Ie},{path:"white",component:Me}]}]});i["default"].use(c["a"]);var Be=new c["a"].Store({state:{asideStatus:"inline-block",fileUploadComponentStatus:"close",fileUploadList:[],levelList:[],fileTreeDialogVisible:!1,fileTreeInfo:{title:"设置"}},mutations:{toggleAside:function(e){e.asideStatus="inline-block"===e.asideStatus?"none":"inline-block"},operationFileUploadWindow:function(e,t){e.fileUploadComponentStatus=t},addUploadFile:function(e,t){if(t.targetId&&t.file&&t.file.name&&t.file.size){for(var n=0;n<e.fileUploadList.length;n++){var i=e.fileUploadList[n];if(t.targetId===i.targetId&&t.file.name===i.file.name&&t.file.size===i.file.size)return}e.fileUploadList.push(t)}},pushLevelList:function(e,t){e.levelList.push(t)},spliceLevelList:function(e,t){e.levelList.splice(t+1,e.levelList.length-t)},openFileTreeDialog:function(e,t){e.fileTreeDialogVisible=!0,e.fileTreeInfo=t},closeFileTreeDialog:function(e){e.fileTreeDialogVisible=!1}},actions:{}});n("26fa");i["default"].config.productionTip=!1,i["default"].use(ae.a),new i["default"]({router:Ne,store:Be,render:function(e){return e(b)}}).$mount("#app")},"5f49":function(e,t,n){"use strict";var i=n("2fa5"),o=n.n(i);o.a},6068:function(e,t,n){},6524:function(e,t,n){},"94af":function(e,t,n){},a98c:function(e,t,n){},ca70:function(e,t,n){e.exports=n.p+"img/user.e63b92fb.jpeg"},cccb:function(e,t,n){"use strict";var i=n("05cf"),o=n.n(i);o.a},f5d0:function(e,t,n){},fa37:function(e,t,n){"use strict";var i=n("6524"),o=n.n(i);o.a}});
//# sourceMappingURL=app.4740fa63.js.map