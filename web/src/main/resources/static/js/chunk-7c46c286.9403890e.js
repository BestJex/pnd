(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c46c286"],{"14de":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-main",[i("div",{staticClass:"main-button"},[i("div",{staticClass:"upload",on:{click:e.triggerFileUpload}},[i("el-button",{attrs:{type:"primary"}},[i("i",{staticClass:"el-icon-upload"}),i("span",[e._v("上传文件")])]),i("input",{ref:"fileInput",staticClass:"upload-input",attrs:{type:"file",name:"file",multiple:""},on:{change:e.dealWithFileUpload}})],1),i("el-button",{attrs:{plain:""},on:{click:e.createFolder}},[i("i",{staticClass:"el-icon-document"}),i("span",[e._v("新建文件夹")])])],1),i("div",{staticClass:"content"},[i("Breadcrumb"),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","default-sort":{prop:"fileName",order:"descending"}}},[i("el-table-column",{attrs:{label:"文件名",prop:"name",sortable:"","min-width":"54"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("FileIcon",{attrs:{type:t.row.type}}),"folder"===t.row.type?i("a",{staticClass:"file-name",on:{click:function(i){return e.getFileList(t.row.id,t.row.name)}}},[e._v("\n                        "+e._s(t.row.name)+"\n                    ")]):i("a",{staticClass:"file-name"},[e._v("\n                        "+e._s(t.row.name)+"\n                    ")])]}}])}),i("el-table-column",{attrs:{prop:"size",label:"大小",formatter:e.formatterSize,"min-width":"22"}}),i("el-table-column",{attrs:{prop:"gmtModified",label:"修改日期",sortable:"","min-width":"22",formatter:e.formatterTime,"show-overflow-tooltip":""}}),i("el-table-column",{attrs:{label:"操作","min-width":"22"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("FileOperation",{attrs:{scope:t},on:{flush:e.flushAccordingToLevelList}})]}}])})],1)],1),e.$store.state.fileTreeDialogVisible?i("FileTree",{on:{flush:e.flushAccordingToLevelList}}):e._e()],1)},o=[],s=i("ab6b"),l=i.n(s),r=(i("612f"),i("3a23"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-icon",class:[e.type]})}),a=[],c={props:{type:{validator:function(e){return-1!==["default","folder","pdf","compress_file","video","audio","picture","doc","txt","torrent","ppt"].indexOf(e)}}}},u=c,f=(i("b5cb"),i("17cc")),d=Object(f["a"])(u,r,a,!1,null,"37e8493c",null),p=d.exports,m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"navigation"},[e.levelList.length>1?i("div",{staticClass:"navigation-prefix"},[i("span",{staticClass:"go-back",on:{click:e.goBack}},[e._v("返回上一级")]),i("span",{staticClass:"navigation-separator"},[e._v("|")])]):e._e(),i("div",{staticClass:"breadcrumb"},e._l(e.levelList,function(t,n){return i("div",{key:n,staticClass:"breadcrumb-item"},[e.levelList.length-1!==n?i("span",{staticClass:"breadcrumb-item-val",on:{click:function(t){return e.forwardTo(n)}}},[e._v(e._s(t.name))]):i("span",{staticClass:"breadcrumb-item-val"},[e._v(e._s(t.name))]),e.levelList.length-1!==n?i("span",{staticClass:"breadcrumb-sparator"},[e._v("/")]):e._e()])}),0)])},h=[],v={computed:{levelList:function(){return this.$store.state.levelList}},methods:{forwardTo:function(e){this.$store.commit("spliceLevelList",e)},goBack:function(){this.$store.commit("spliceLevelList",this.levelList.length-2)}}},g=v,b=(i("5f49"),Object(f["a"])(g,m,h,!1,null,"30ecfdd4",null)),L=b.exports,T=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dropdown",[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-more operation"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(t){return e.move(t)}}},[e._v("移动到")]),"folder"!==e.scope.row.type?i("el-dropdown-item",{nativeOn:{click:function(t){return e.copy(t)}}},[e._v("复制到")]):e._e(),i("el-dropdown-item",{nativeOn:{click:function(t){return e.rename(t)}}},[e._v("重命名")]),"folder"!==e.scope.row.type?i("el-dropdown-item",{nativeOn:{click:function(t){return e.download(t)}}},[e._v("下载")]):e._e(),i("el-dropdown-item",{nativeOn:{click:function(t){return e.deleteResource(t)}}},[e._v("删除")])],1)],1)},w=[],y=i("6c6e"),$={props:["scope"],methods:{move:function(){this.$store.commit("openFileTreeDialog",{title:"["+this.scope.row.name+"] 移动到",id:this.scope.row.id,type:"move"})},copy:function(){this.$store.commit("openFileTreeDialog",{title:"["+this.scope.row.name+"] 复制到",id:this.scope.row.id,type:"copy"})},download:function(){this.$message({message:"该功能还为开发",type:"warning",duration:3e3})},rename:function(){var e=this;this.$prompt("请输入新的文件名","重新命名",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.scope.row.name}).then(function(t){var i=t.value;Object(y["k"])(e.scope.row.id,i).then(function(){e.$emit("flush")})}).catch(function(){})},deleteResource:function(){var e=this;this.$confirm("是否确定要删除该文件？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(y["d"])(e.scope.row.id).then(function(){e.$emit("flush")})}).catch(function(){})}}},_=$,k=(i("f107"),Object(f["a"])(_,T,w,!1,null,"49939484",null)),C=k.exports,F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.$store.state.fileTreeInfo.title,visible:e.$store.state.fileTreeDialogVisible},on:{"update:visible":function(t){return e.$set(e.$store.state,"fileTreeDialogVisible",t)}}},[i("el-tree",{ref:"fileTree",attrs:{props:e.defaultProps,load:e.loadNode,"node-key":"id","empty-text":"没有文件夹",lazy:"","check-strictly":"","highlight-current":"","show-checkbox":""}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.$store.commit("closeFileTreeDialog")}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.operateNode}},[e._v("确 定")])],1)],1)},S=[],O={data:function(){return{defaultProps:{label:"name"}}},methods:{loadNode:function(e,t){var i=this;0===e.level?t([{id:0,name:"全部文件"}]):Object(y["f"])(e.data.id).then(function(e){"move"===i.$store.state.fileTreeInfo.type?t(e.data.filter(function(e){return e.id!==i.$store.state.fileTreeInfo.id})):t(e.data)})},operateNode:function(){"move"===this.$store.state.fileTreeInfo.type?this.moveNode():"copy"===this.$store.state.fileTreeInfo.type&&this.copyNode()},moveNode:function(){var e=this,t=this.$refs.fileTree.getCheckedKeys();1!==t.length?this.$message({message:"请选择一个将要移动的目标文件夹",type:"warning",duration:3e3}):Object(y["i"])(this.$store.state.fileTreeInfo.id,t[0]).then(function(){e.$emit("flush"),e.$store.commit("closeFileTreeDialog")})},copyNode:function(){var e=this,t=this.$refs.fileTree.getCheckedKeys();0===t.length?this.$message({message:"请选择将要复制到的目标文件夹",type:"warning",duration:3e3}):Object(y["a"])(this.$store.state.fileTreeInfo.id,t).then(function(){e.$message({message:"复制成功",type:"success",duration:3e3}),e.$store.commit("closeFileTreeDialog")})}}},x=O,D=Object(f["a"])(x,F,S,!1,null,null,null),I=D.exports,A=i("6d5a"),j={components:{FileIcon:p,Breadcrumb:L,FileOperation:C,FileTree:I},data:function(){return{tableData:[],fileTreeDialogVisible:!1,dialogVisible:"设置"}},computed:{levelList:function(){return this.$store.state.levelList}},watch:{levelList:function(){this.flushAccordingToLevelList()},"$store.state.flushFileListEvent":function(){this.flushAccordingToLevelList()}},methods:{createFolder:function(){var e=this,t=this.levelList[this.levelList.length-1].parentId;this.$prompt("请输入文件夹名","新建文件夹",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(i){var n=i.value;Object(y["c"])(t,n).then(function(){e.flushAccordingToLevelList()})}).catch(function(){})},getFileList:function(e,t){var i=this;Object(y["e"])(e).then(function(n){i.tableData=n.data;var o=i.levelList.length;0!==o&&i.levelList[o-1].parentId===e||i.$store.commit("pushLevelList",{parentId:e,name:t})})},flushAccordingToLevelList:function(){var e=this.levelList[this.levelList.length-1];this.getFileList(e.parentId,e.name)},formatterTime:function(e){return Object(A["b"])(new Date(e.gmtModified))},formatterSize:function(e){return Object(A["a"])(e.size)},triggerFileUpload:function(){this.$refs.fileInput.click()},dealWithFileUpload:function(e){var t=this;this.$store.commit("clearFileUploadList");var i=e.target.files,n=this.levelList[this.levelList.length-1];l()(i).forEach(function(e){var i={folderId:n.parentId,targetFolderName:n.name,file:e};t.$store.commit("addUploadFile",i),t.$store.commit("operationFileUploadWindow","open")})}},created:function(){0===this.levelList.length?this.getFileList(0,"全部文件"):this.flushAccordingToLevelList()}},N=j,V=(i("7383"),Object(f["a"])(N,n,o,!1,null,"415ea84f",null));t["default"]=V.exports},"204b":function(e,t,i){},"50cd":function(e,t,i){"use strict";var n=i("4cf4"),o=i("0763");e.exports=function(e,t,i){t in e?n.f(e,t,o(0,i)):e[t]=i}},"5f49":function(e,t,i){"use strict";var n=i("788d"),o=i.n(n);o.a},"612f":function(e,t,i){for(var n=i("5c07"),o=i("d753"),s=i("7f00"),l=i("4839"),r=i("c84b"),a=i("f03e"),c=i("f3ae"),u=c("iterator"),f=c("toStringTag"),d=a.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=o(p),h=0;h<m.length;h++){var v,g=m[h],b=p[g],L=l[g],T=L&&L.prototype;if(T&&(T[u]||r(T,u,d),T[f]||r(T,f,g),a[g]=d,b))for(v in n)T[v]||s(T,v,n[v],!0)}},"617a":function(e,t,i){},7383:function(e,t,i){"use strict";var n=i("617a"),o=i.n(n);o.a},"788d":function(e,t,i){},"82cb":function(e,t,i){},"8af1":function(e,t,i){"use strict";var n=i("8232"),o=i("471d"),s=i("7182"),l=i("44a7"),r=i("33ef"),a=i("3202"),c=i("50cd"),u=i("0811");o(o.S+o.F*!i("1969")(function(e){Array.from(e)}),"Array",{from:function(e){var t,i,o,f,d=s(e),p="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,v=void 0!==h,g=0,b=u(d);if(v&&(h=n(h,m>2?arguments[2]:void 0,2)),void 0==b||p==Array&&r(b))for(t=a(d.length),i=new p(t);t>g;g++)c(i,g,v?h(d[g],g):d[g]);else for(f=b.call(d),i=new p;!(o=f.next()).done;g++)c(i,g,v?l(f,h,[o.value,g],!0):o.value);return i.length=g,i}})},"92dd":function(e,t,i){i("4d6c"),i("8af1"),e.exports=i("836e").Array.from},ab6b:function(e,t,i){e.exports=i("92dd")},b5cb:function(e,t,i){"use strict";var n=i("82cb"),o=i.n(n);o.a},f107:function(e,t,i){"use strict";var n=i("204b"),o=i.n(n);o.a}}]);
//# sourceMappingURL=chunk-7c46c286.9403890e.js.map