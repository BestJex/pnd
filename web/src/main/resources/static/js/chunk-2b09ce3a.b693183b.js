(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b09ce3a"],{"1a8c":function(e,t,n){"use strict";var i=n("91fe"),r=n("407d").map,o=n("b1a1"),a=n("6885"),l=o("map"),c=a("map");i({target:"Array",proto:!0,forced:!l||!c},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"3b1d":function(e,t,n){},"3c4a":function(e,t,n){"use strict";var i=n("91fe"),r=n("f240"),o=n("51cf"),a=n("61ef"),l=n("f30e"),c=1..toFixed,s=Math.floor,u=function(e,t,n){return 0===t?n:t%2===1?u(e,t-1,n*e):u(e*e,t/2,n)},f=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},d=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){c.call({})}));i({target:"Number",proto:!0,forced:d},{toFixed:function(e){var t,n,i,l,c=o(this),d=r(e),p=[0,0,0,0,0,0],h="",v="0",g=function(e,t){var n=-1,i=t;while(++n<6)i+=e*p[n],p[n]=i%1e7,i=s(i/1e7)},m=function(e){var t=6,n=0;while(--t>=0)n+=p[t],p[t]=s(n/e),n=n%e*1e7},b=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==p[e]){var n=String(p[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(h="-",c=-c),c>1e-21)if(t=f(c*u(2,69,1))-69,n=t<0?c*u(2,-t,1):c/u(2,t,1),n*=4503599627370496,t=52-t,t>0){g(0,n),i=d;while(i>=7)g(1e7,0),i-=7;g(u(10,i,1),0),i=t-1;while(i>=23)m(1<<23),i-=23;m(1<<i),g(1,1),m(2),v=b()}else g(0,n),g(1<<-t,0),v=b()+a.call("0",d);return d>0?(l=v.length,v=h+(l<=d?"0."+a.call("0",d-l)+v:v.slice(0,l-d)+"."+v.slice(l-d))):v=h+v,v}})},"51cf":function(e,t,n){var i=n("67ea");e.exports=function(e){if("number"!=typeof e&&"Number"!=i(e))throw TypeError("Incorrect invocation");return+e}},"61ef":function(e,t,n){"use strict";var i=n("f240"),r=n("3193");e.exports="".repeat||function(e){var t=String(r(this)),n="",o=i(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},7267:function(e,t,n){"use strict";var i=n("3d8a"),r=n("ac83"),o=n("f30e"),a=n("0618"),l="toString",c=RegExp.prototype,s=c[l],u=o((function(){return"/a/b"!=s.call({source:"a",flags:"b"})})),f=s.name!=l;(u||f)&&i(RegExp.prototype,l,(function(){var e=r(this),t=String(e.source),n=e.flags,i=String(void 0===n&&e instanceof RegExp&&!("flags"in c)?a.call(e):n);return"/"+t+"/"+i}),{unsafe:!0})},"86dd":function(e,t,n){"use strict";var i=n("91fe"),r=n("407d").filter,o=n("b1a1"),a=n("6885"),l=o("filter"),c=a("filter");i({target:"Array",proto:!0,forced:!l||!c},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},b128:function(e,t,n){var i=n("7a23"),r=n("d5dc"),o=n("12d9"),a=n("60f2"),l=n("c223").f,c=n("65af").f,s=n("e1dd"),u=n("0618"),f=n("dcb6"),d=n("3d8a"),p=n("f30e"),h=n("d0e2").set,v=n("a867"),g=n("57c4"),m=g("match"),b=r.RegExp,w=b.prototype,y=/a/g,F=/a/g,_=new b(y)!==y,T=f.UNSUPPORTED_Y,x=i&&o("RegExp",!_||T||p((function(){return F[m]=!1,b(y)!=y||b(F)==F||"/a/i"!=b(y,"i")})));if(x){var k=function(e,t){var n,i=this instanceof k,r=s(e),o=void 0===t;if(!i&&r&&e.constructor===k&&o)return e;_?r&&!o&&(e=e.source):e instanceof k&&(o&&(t=u.call(e)),e=e.source),T&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var l=a(_?new b(e,t):b(e,t),i?this:w,k);return T&&n&&h(l,{sticky:n}),l},$=function(e){e in k||l(k,e,{configurable:!0,get:function(){return b[e]},set:function(t){b[e]=t}})},O=c(b),E=0;while(O.length>E)$(O[E++]);w.constructor=k,k.prototype=w,d(r,"RegExp",k)}v("RegExp")},bdf0:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return u}));var i=n("97af"),r=function(e){return Object(i["a"])({url:"/v1/file/parent/".concat(e)})},o=function(e){return Object(i["a"])({url:"/v1/file/".concat(e)})},a=function(e){return window.location.origin+"/v1/file/".concat(e,"/download")},l=function(e,t,n){return Object(i["a"])({url:"/v1/file",method:"post",data:{parentId:e,fileName:t,type:n}})},c=function(e,t){return Object(i["a"])({url:"/v1/file/".concat(e,"/rename"),method:"put",data:{fileName:t}})},s=function(e){return Object(i["a"])({url:"/v1/file",method:"delete",data:e})},u=function(e,t,n){return Object(i["a"])({url:"/v1/file",method:"put",data:{fileIds:e,targetIds:t,type:n}})}},bf7b:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-list-container"},[n("div",{staticClass:"operater"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:e.uploadFileTrigger}},[e._v("上传文件")]),n("el-button",{attrs:{icon:"el-icon-folder-add",plain:""},on:{click:e.createFolder}},[e._v("新增文件夹")]),n("el-button-group",{staticClass:"extend-btn"},[1===e.selection.length?n("el-button",{attrs:{icon:"el-icon-edit",plain:""},on:{click:function(t){return e.renameFile(e.selection[0])}}},[e._v("重命名")]):e._e(),e.canDownload()?n("el-button",{attrs:{icon:"el-icon-download",plain:""},on:{click:function(t){return e.downloadFiles(e.selection)}}},[e._v("下载")]):e._e(),e.selection.length>0?n("el-button",{attrs:{icon:"el-icon-delete",plain:""},on:{click:function(t){return e.deleteFiles(e.selection)}}},[e._v("删除")]):e._e(),e.selection.length>0?n("el-button",{attrs:{plain:""},on:{click:function(t){return e.moveTo(e.selection)}}},[e._v("移动到")]):e._e(),e.selection.length>0?n("el-button",{attrs:{plain:""},on:{click:function(t){return e.copyTo(e.selection)}}},[e._v("复制到")]):e._e()],1)],1),n("div",{staticClass:"navigation"},[e.navigation.length>1?n("div",{staticClass:"previous-level"},[n("router-link",{attrs:{to:"/folder/"+e.navigation[e.navigation.length-2].id}},[n("span",[e._v("返回上一级")])]),n("span",{staticClass:"navigation-separator"},[e._v("|")])],1):e._e(),n("div",{staticClass:"breadcrumb"},e._l(e.navigation,(function(t,i){return n("div",{key:"navigation-"+i,staticClass:"breadcrumb-item"},[n("router-link",{attrs:{to:"/folder/"+t.id}},[n("span",{staticClass:"breadcrumb-name"},[e._v(e._s(t.fileName))])]),i!==e.navigation.length-1?n("span",{staticClass:"navigation-separator"},[e._v("/")]):e._e()],1)})),0)]),n("div",{staticClass:"file-list"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fileList,height:"100%","default-sort":{prop:"fileName",order:"ascending"}},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection","show-overflow-tooltip":"","min-width":"2"}}),n("el-table-column",{attrs:{prop:"fileName",label:"文件名",sortable:"","show-overflow-tooltip":"","min-width":"33"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"file-icon",class:e.getFileType(t.row.type)}),"folder"===e.getFileType(t.row.type)?n("router-link",{staticClass:"file-name",attrs:{to:"/folder/"+t.row.id}},[e._v(e._s(t.row.fileName))]):"video"===e.getFileType(t.row.type)?n("router-link",{staticClass:"file-name",attrs:{target:"_blank",to:"/video/"+t.row.id}},[e._v(e._s(t.row.fileName))]):n("router-link",{staticClass:"file-name",attrs:{to:""}},[e._v(e._s(t.row.fileName))])]}}])}),n("el-table-column",{attrs:{prop:"size",label:"大小",sortable:"",formatter:e.sizeFormatter,"min-width":"12"}}),n("el-table-column",{attrs:{prop:"updateTime",label:"修改日期",sortable:"","show-overflow-tooltip":"",formatter:e.dateFormatter,"min-width":"22"}}),n("el-table-column",{attrs:{"min-width":"15",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-dropdown",[n("span",[n("i",{staticClass:"el-icon-more"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){return e.moveTo([t.row])}}},[e._v("移动到")]),n("el-dropdown-item",{nativeOn:{click:function(n){return e.copyTo([t.row])}}},[e._v("复制到")]),n("el-dropdown-item",{nativeOn:{click:function(n){return e.renameFile(t.row)}}},[e._v("重命名")]),"folder"!=e.getFileType(t.row.type)?n("el-dropdown-item",{nativeOn:{click:function(n){return e.downloadFiles([t.row])}}},[e._v("下载")]):e._e(),n("el-dropdown-item",{nativeOn:{click:function(n){return e.deleteFiles([t.row])}}},[e._v("删除")])],1)],1)]}}])})],1)],1),e.folderTreeVisiable?n("FolderTreeDialog",e._b({on:{return:e.dealReturn}},"FolderTreeDialog",e.folderTreeProps,!1)):e._e()],1)},r=[],o=(n("4045"),n("1a8c"),n("bdf0")),a=(n("3c4a"),n("b128"),n("b3f9"),n("7267"),n("d780"),function(e,t,n){if(null!==e&&void 0!==e){var i;n=n||["B","K","M","G","TB"];while((i=n.shift())&&e>1024)e/=1024;return("B"===i?e:e.toFixed(t||2))+i}}),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/MM/dd hh:mm:ss",n=new Date(e),i={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),"S+":n.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),i)if(new RegExp("("+r+")").test(t)){for(var o="",a=1;a<=RegExp.$1.length;a++)o+="0";var l="";if(1==RegExp.$1.length)l=i[r];else{o+=i[r];var c=(""+i[r]).length;o=o.substr(c),l=o}t=t.replace(RegExp.$1,l)}return t},c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:!0,width:"40%"}},[n("el-tree",{ref:"tree",attrs:{props:e.props,load:e.loadNode,"node-key":"id",lazy:"","check-strictly":"","show-checkbox":""}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){return e.$emit("return",{type:"cancel"})}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},s=[],u=(n("86dd"),{props:{title:{type:String,default:"提示"},sourceFiles:{type:Array,default:function(){return[]}}},data:function(){return{props:{label:"fileName"}}},methods:{loadNode:function(e,t){var n=this;if(0===e.level)return t([{fileName:"全部文件",id:0}]);Object(o["e"])(e.data.id).then((function(e){var i=e.data.filter((function(e){return"folder"===e.type&&!n.contains(n.sourceFiles,e)}));t(i)})).catch((function(){}))},submit:function(){this.$emit("return",{type:"submit",value:this.$refs.tree.getCheckedKeys()})},contains:function(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t.id)return!0;return!1}}}),f=u,d=n("5511"),p=Object(d["a"])(f,c,s,!1,null,null,null),h=p.exports,v={name:"FileList",components:{FolderTreeDialog:h},props:["folderId"],data:function(){return{folderTreeVisiable:!1,folderTreeProps:{type:"move",title:"提示",sourceFiles:[]},fileList:[],navigation:[],selection:[]}},watch:{folderId:function(){this.$store.commit("changeFolderId",this.folderId),this.renderFileList()}},methods:{uploadFileTrigger:function(){window.eventBus.$emit("openUploader")},renderFileList:function(){var e=this;Object(o["e"])(this.folderId).then((function(t){e.fileList=t.data,e.navigation=t.extra})).catch((function(){}))},createFolder:function(){var e=this;this.$prompt("请输入文件夹名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{1,100}$/,inputErrorMessage:"文件夹名长度必须小于100"}).then((function(t){var n=t.value;Object(o["a"])(e.folderId,n,"folder").then((function(){e.$message({type:"success",message:"创建成功"}),e.renderFileList()})).catch((function(t){t.data&&e.$message({type:"error",message:t.data.msg})}))})).catch((function(){}))},renameFile:function(e){var t=this;this.$prompt("请输入文件夹名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{1,100}$/,inputValue:e.fileName,inputErrorMessage:"文件夹名长度必须小于100"}).then((function(n){var i=n.value;Object(o["g"])(e.id,i).then((function(){t.$message({type:"success",message:"文件重命名成功"}),t.renderFileList()})).catch((function(e){e.data&&t.$message({type:"error",message:e.data.msg})}))})).catch((function(){}))},deleteFiles:function(e){for(var t=this,n=new Array,i=0;i<e.length;i++)n.push(e[i].id);this.$confirm("确定删除文件?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["b"])(n).then((function(){t.$message({type:"success",message:"文件删除成功"}),t.renderFileList()})).catch((function(){t.$message({type:"error",message:"文件删除失败"}),t.renderFileList()}))})).catch((function(){}))},moveTo:function(e){var t=this;this.folderTreeProps={type:"move",title:"移动到",sourceFiles:e},this.$nextTick((function(){t.folderTreeVisiable=!0}))},copyTo:function(e){var t=this;this.folderTreeProps={type:"copy",title:"复制到",sourceFiles:e},this.$nextTick((function(){t.folderTreeVisiable=!0}))},dealReturn:function(e){if("cancel"!==e.type){var t=e.value,n=this,i=this.folderTreeProps.sourceFiles.map((function(e){return e.id})),r=function(e,t,i,r){Object(o["f"])(e,t,i).then((function(){r(),n.folderTreeVisiable=!1,n.renderFileList()})).catch((function(){}))};"move"===this.folderTreeProps.type?1!==t.length?this.$message({type:"error",message:"必须选择一个目标文件夹"}):r(i,t,"move",(function(){n.$message({type:"success",message:"移动文件成功"})})):"copy"===this.folderTreeProps.type&&(1!==t.length?this.$message({type:"error",message:"请选择文件夹"}):r(i,t,"copy",(function(){n.$message({type:"success",message:"复制文件成功"})})))}else this.folderTreeVisiable=!1},handleSelectionChange:function(e){this.selection=e},canDownload:function(){for(var e=!1,t=0;t<this.selection.length;t++)if("folder"===this.selection[t].type){e=!0;break}return!e&&this.selection.length>0},downloadFiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];function t(e){var t=document.createElement("a");t.setAttribute("href",e),t.click()}var n=0;n<e.length&&(t(Object(o["c"])(e[n].id)),n++);var i=setInterval((function(){n<e.length?(t(Object(o["c"])(e[n].id)),n++):clearInterval(i)}),2e3)},getFileType:function(e){var t=["default","folder","pdf","compress_file","web","video","audio","picture","doc","txt","torrent","ppt","code"];return-1!==t.indexOf(e)?e:"default"},sizeFormatter:function(e){var t=a(e.size,2);return"folder"===e.type||void 0===t?"-":t},dateFormatter:function(e){return l(e.updateTime)}},mounted:function(){var e=this,t=this;this.renderFileList(),window.eventBus.$on("flushFileList",(function(n){e.params=n||{},t.renderFileList()}))},destroyed:function(){window.eventBus.$off("flushFileList")}},g=v,m=(n("d4f6"),Object(d["a"])(g,i,r,!1,null,"1f3bbea7",null));t["default"]=m.exports},d4f6:function(e,t,n){"use strict";var i=n("3b1d"),r=n.n(i);r.a},e1dd:function(e,t,n){var i=n("d68d"),r=n("67ea"),o=n("57c4"),a=o("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==r(e))}}}]);
//# sourceMappingURL=chunk-2b09ce3a.b693183b.js.map